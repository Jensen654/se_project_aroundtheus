!function(){"use strict";class e{constructor(e,t,s,i,n,o){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=i,this._handleLikeClick=n,this._handleLikeDelete=o}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link}))),this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)}))}remove(){this._cardElement.remove()}_handleLikeButton(){this._isLiked?this._isLiked&&this._handleLikeDelete(this._id).then((()=>{this._likeButton.classList.remove("card__like-button_active"),this._isLiked=!1})).catch((e=>console.log(e))):this._handleLikeClick(this._id).then((()=>{this._likeButton.classList.add("card__like-button_active"),this._isLiked=!0})).catch((e=>console.log(e)))}setIsLiked(e){this._isLiked=e,this._renderLikes()}isLiked(){return this._isLiked}_renderLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._isLiked||this._likeButton.classList.remove("card__like-button_active")}returnCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__trash-button"),this._cardDescription=this._cardElement.querySelector(".card__text"),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardDescription.textContent=this._name,this._renderLikes(),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._options=e,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity(){return Array.from(this._inputEls).every((e=>e.validity.valid))}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_setEventListeners(e){e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}enableValidation(){this._inputEls=this._formElement.querySelectorAll(this._inputSelector),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._inputEls.forEach((e=>{this._setEventListeners(e,this._submitButton)}))}}class s{constructor(e){this._popupElement=e,this._closeButton=this._popupElement.querySelector(".modal__close"),this._modalContainer=this._popupElement.querySelector(".js-modalContainer"),this._submitButton=this._popupElement.querySelector(".modal__button"),this._boundHandleEscapeClose=this._handleEscapeClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._boundHandleEscapeClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._boundHandleEscapeClose)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(()=>{this.close()})),this._modalContainer.addEventListener("click",(e=>{e.stopPropagation()}))}}class i extends s{constructor(e,t,s){super(e),this._handleFormSubmit=t,this._buttonText=this._submitButton.textContent,this._loadingButtonText=s,this._popupForm=this._popupElement.querySelector(".modal__container-form"),this._inputList=this._popupElement.querySelectorAll(".modal__container-input")}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._buttonText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}))}}const n={formSelector:".modal__container-form",inputSelector:".modal__container-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_error",errorClass:"modal__error_visible"},o=document.querySelector("#card-modal"),r=document.querySelector("#edit-modal"),a=document.querySelector("#profile-image-modal"),l=r.querySelector(".modal__container-form"),c=o.querySelector(".modal__container-form"),d=a.querySelector(".modal__container-form"),h=document.querySelector("#image-modal"),_=document.querySelector("#trash-modal"),u=document.querySelector(".profile__image"),m=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__image_edit-button"),E=document.querySelector(".profile__add-button"),L=document.querySelector(".profile__title"),f=document.querySelector(".profile__description"),b=r.querySelector("#modal-name"),k=r.querySelector("#modal-description"),v=a.querySelector(".modal__container-input"),C=(o.querySelector(".modal__button"),r.querySelector(".modal__button"),_.querySelector(".modal__button"),document.querySelector(".cards__list")),g="Saving...",S=new t(n,l),y=new t(n,c),B=new t(n,d);S.enableValidation(),y.enableValidation(),B.enableValidation();const q=new class extends s{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__image-description");t.src=e.link,t.alt=e.name,s.textContent=e.name,super.open()}}(h);q.setEventListeners();const I=new i(r,(function(e){U.updateProfileInfo({name:e.title,about:e.description}).then((()=>{I.showLoading(),D.setUserInfo({nameInput:e.title,descriptionInput:e.description}),I.close()})).catch((e=>console.log(e))).finally((()=>{I.hideLoading()}))}),g),x=new i(o,(function(e){const t=e.title,s=e.description;U.addCard({name:t,link:s}).then((()=>{x.showLoading(),F({name:t,link:s}),x.close(),c.reset(),y.toggleButtonState()})).catch((e=>console.log(e))).finally((()=>{x.hideLoading()}))}),g),w=new i(a,(function(e){u.src=v.value,U.updateProfilePic(e).then((()=>{w.showLoading(),w.close(),d.reset(),y.toggleButtonState()})).catch((e=>console.log(e))).finally((()=>{w.hideLoading()}))}),g);I.setEventListeners(),x.setEventListeners(),w.setEventListeners();const P=new class extends s{constructor(e,t){super(e),this._buttonText=this._submitButton.textContent,this._loadingButtonText=t}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._buttonText}setEventListeners(){super.setEventListeners(),this._modalContainer.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteFormSubmit().then((()=>{this.close()}))}))}setSubmitAction(e){this._handleDeleteFormSubmit=e}}(_,g);P.setEventListeners();const D=new class{constructor(e){let{nameContainer:t,descriptionContainer:s,profilePic:i}=e;this._nameContainer=t,this._descriptionContainer=s,this._profilePic=i}getUserInfo(){const e={};return e.profileName=this._nameContainer.textContent,e.profileDescription=this._descriptionContainer.textContent,e}setAvatar(e){this._profilePic.src=e.avatar}setUserInfo(e){this._nameContainer.textContent=e.nameInput,this._descriptionContainer.textContent=e.descriptionInput}}({nameContainer:L,descriptionContainer:f,profilePic:u}),U=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_processResponse=e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`);getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._processResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._processResponse)}toggleCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._processResponse)}toggleCardDislike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._processResponse)}getProfileInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._processResponse)}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}updateProfilePic(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1755563a-df02-4ecd-aa91-5c5958bedadf","Content-Type":"application/json"}}),T=new class{constructor(e,t){let{renderer:s}=e;this._render=s,this._container=t}renderItems(e){e.forEach((e=>this._render(e)))}addItem(e){this._container.prepend(e)}}({renderer:F},C);function $(e){q.open(e)}function V(e){P.open(),P.setSubmitAction((()=>(P.showLoading(),U.deleteCard(e._id).then((()=>{e.remove()})).catch((e=>console.log(e))).finally((()=>{P.hideLoading()})))))}function A(e){return U.toggleCardLike(e)}function R(e){return U.toggleCardDislike(e)}function F(t){const s=new e(t,".card-template",$,V,A,R).returnCardElement();T.addItem(s)}U.getInitialCards().then((e=>{T.renderItems(e)})).catch((e=>console.log(e))),U.getProfileInfo().then((e=>(D.setAvatar(e),D.setUserInfo({nameInput:e.name,descriptionInput:e.about})))).catch((e=>console.log(e))),m.addEventListener("click",(function(e){!function(){const e=D.getUserInfo();b.value=e.profileName,k.value=e.profileDescription}(),I.open()})),E.addEventListener("click",(e=>{x.open()})),p.addEventListener("click",(()=>{w.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixLQUU5QjRHLEVBQ0dtRCxpQkFDQWxLLE1BQU1rSixJQUVMOUIsRUFBU3NCLFVBQVVRLEdBRVo5QixFQUFTQyxZQUFZLENBQzFCQyxVQUFXNEIsRUFBSXJLLEtBQ2YwSSxpQkFBa0IyQixFQUFJaEMsV0FHekJoSCxPQUFPQyxHQUFRQyxRQUFRQyxJQUFJRixLQW9IOUI0RixFQUFrQnJHLGlCQUFpQixTQUFTLFNBQVUyRSxJQTVHdEQsV0FDRSxNQUFNK0csRUFBU2hFLEVBQVNxQixjQUV4QnJDLEVBQWlCakIsTUFBUWlHLEVBQU9sRixZQUNoQ0csRUFBd0JsQixNQUFRaUcsRUFBT2pGLGtCQUN6QyxDQXdHRWtGLEdBQ0F2RSxFQUFpQjlDLE1BQ25CLElBRUFpQyxFQUFXdkcsaUJBQWlCLFNBQVUyRSxJQUNwQ29ELEVBQWN6RCxNQUFNLElBR3RCZ0MsRUFBdUJ0RyxpQkFBaUIsU0FBUyxLQUMvQ21JLEVBQXNCN0QsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZURlbGV0ZVxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VEZWxldGUgPSBoYW5kbGVMaWtlRGVsZXRlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSlcclxuICAgICk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIC8vIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgICAgICB0aGlzLl9pc0xpa2VkID0gdHJ1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlRGVsZXRlKHRoaXMuX2lkKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgICAgICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldElzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm5DYXJkRWxlbWVudCgpIHtcclxuICAgIC8vZ2V0IGNhcmQgdmlld1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuXHJcbiAgICAvL2NhcmQgaW1hZ2UgYW5kIHNvdXJjZVxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG5cclxuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vcmV0dXJuIGNhcmRcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSgpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0RWxzKS5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgY29uc3QgZm91bmRJbnZhbGlkID0gIXRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCk7XHJcblxyXG4gICAgaWYgKGZvdW5kSW52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhpbnB1dEVsKSB7XHJcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGlucHV0RWwsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IHBvcHVwU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcblxyXG4gICAgdGhpcy5fbW9kYWxDb250YWluZXIgPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1tb2RhbENvbnRhaW5lclwiKTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG5cclxuICAgIHRoaXMuX2JvdW5kSGFuZGxlRXNjYXBlQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fYm91bmRIYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fYm91bmRIYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9tb2RhbENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0LCBsb2FkaW5nQnV0dG9uVGV4dCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcblxyXG4gICAgdGhpcy5fbG9hZGluZ0J1dHRvblRleHQgPSBsb2FkaW5nQnV0dG9uVGV4dDtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2NvbnRhaW5lci1mb3JtXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgIFwiLm1vZGFsX19jb250YWluZXItaW5wdXRcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNob3dMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fbG9hZGluZ0J1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBoaWRlTG9hZGluZygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGRhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSk7XHJcbiAgICAgIC8vIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBvcHRpb25zID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2NvbnRhaW5lci1mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmV4cG9ydCB7IGluaXRpYWxDYXJkcywgb3B0aW9ucyB9O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBvcHRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qc1wiO1xyXG5cclxuLy9NYWluIFNlbGVjdG9yc1xyXG5jb25zdCBlZGl0Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1pbWFnZS1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19jb250YWluZXItZm9ybVwiXHJcbik7XHJcbmNvbnN0IGNhcmRFZGl0Rm9ybSA9IGVkaXRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyLWZvcm1cIik7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZUVkaXRGb3JtID0gcHJvZmlsZUltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fY29udGFpbmVyLWZvcm1cIlxyXG4pO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWxcIik7XHJcbmNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdHJhc2gtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVQaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG4vL0J1dHRvbnNcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2VFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19pbWFnZV9lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmNvbnN0IGFkZE5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbi8vRm9ybSBEYXRhXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWRlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlUGljTW9kYWxJbnB1dCA9IHByb2ZpbGVJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBlZGl0Q2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuY29uc3QgZGVsZXRlQ2FyZEJ1dHRvbiA9IGRlbGV0ZUNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbi8vQ2FyZCB0ZW1wbGF0ZVxyXG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuLy9PdGhlclxyXG5jb25zdCBsb2FkaW5nQnV0dG9uVGV4dCA9IFwiU2F2aW5nLi4uXCI7XHJcblxyXG4vL1xyXG4vL0NsYXNzIGluc3RhbnRpYXRvcnNcclxuXHJcbi8vRm9ybVZhbGlkYXRvciBjbGFzc1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBjYXJkRWRpdEZvcm0pO1xyXG5jb25zdCBwcm9maWxlUGljRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIG9wdGlvbnMsXHJcbiAgcHJvZmlsZUltYWdlRWRpdEZvcm1cclxuKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnByb2ZpbGVQaWNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vUG9wdXBXaXRoSW1hZ2UgQ2xhc3NcclxuY29uc3QgcG9wdXBQcmV2aWV3SW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocHJldmlld0ltYWdlTW9kYWwpO1xyXG5wb3B1cFByZXZpZXdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9Qb3B1cFdpdGhGb3JtIENsYXNzXHJcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBlZGl0UHJvZmlsZU1vZGFsLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0XHJcbik7XHJcbmNvbnN0IHBvcHVwQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBlZGl0Q2FyZE1vZGFsLFxyXG4gIGhhbmRsZUNhcmRGb3JtU3VibWl0LFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0XHJcbik7XHJcbmNvbnN0IHBvcHVwUHJvZmlsZUltYWdlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHByb2ZpbGVJbWFnZU1vZGFsLFxyXG4gIGhhbmRsZVByb2ZpbGVJbWFnZUZvcm1TdWJtaXQsXHJcbiAgbG9hZGluZ0J1dHRvblRleHRcclxuKTtcclxucG9wdXBQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwUHJvZmlsZUltYWdlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9Qb3B1cFdpdGhEZWxldGUgQ2xhc3NcclxuY29uc3QgcG9wdXBXaXRoRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhEZWxldGUoXHJcbiAgZGVsZXRlQ2FyZE1vZGFsLFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0XHJcbik7XHJcbnBvcHVwV2l0aERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vVXNlckluZm8gQ2xhc3NcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVDb250YWluZXI6IHByb2ZpbGVOYW1lLFxyXG4gIGRlc2NyaXB0aW9uQ29udGFpbmVyOiBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVBpYyxcclxufSk7XHJcblxyXG4vL0FwaSBDbGFzc1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIxNzU1NTYzYS1kZjAyLTRlY2QtYWE5MS01YzU5NThiZWRhZGZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9TZWN0aW9uIENsYXNzXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sIGNhcmRMaXN0RWwpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRJdGVtcykgPT4ge1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkSXRlbXMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuYXBpXHJcbiAgLmdldFByb2ZpbGVJbmZvKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAvLyBwcm9maWxlUGljLnNyYyA9IHJlcy5hdmF0YXI7XHJcbiAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzKTtcclxuXHJcbiAgICByZXR1cm4gdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lSW5wdXQ6IHJlcy5uYW1lLFxyXG4gICAgICBkZXNjcmlwdGlvbklucHV0OiByZXMuYWJvdXQsXHJcbiAgICB9KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuXHJcbi8vIGluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbi8vICAgYXBpLmFkZENhcmQoY2FyZCk7XHJcbi8vIH0pO1xyXG5cclxuLy9cclxuLy9GdW5jdGlvbnNcclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVJbnB1dHMoKSB7XHJcbiAgY29uc3QgaW5wdXRzID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IGlucHV0cy5wcm9maWxlTmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGlucHV0cy5wcm9maWxlRGVzY3JpcHRpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlSW5mbyh7XHJcbiAgICAgIG5hbWU6IGRhdGEudGl0bGUsXHJcbiAgICAgIGFib3V0OiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBQcm9maWxlRm9ybS5zaG93TG9hZGluZygpO1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZUlucHV0OiBkYXRhLnRpdGxlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uSW5wdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3B1cFByb2ZpbGVGb3JtLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUZvcm0uaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgY29uc3QgbmFtZSA9IGRhdGEudGl0bGU7XHJcbiAgY29uc3QgbGluayA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh7IG5hbWU6IG5hbWUsIGxpbms6IGxpbmsgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBDYXJkRm9ybS5zaG93TG9hZGluZygpO1xyXG4gICAgICByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9KTtcclxuICAgICAgcG9wdXBDYXJkRm9ybS5jbG9zZSgpO1xyXG4gICAgICBjYXJkRWRpdEZvcm0ucmVzZXQoKTtcclxuICAgICAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cENhcmRGb3JtLmhpZGVMb2FkaW5nKCk7XHJcbiAgICB9KTtcclxuICAvLyByZW5kZXJDYXJkKHsgbmFtZSwgbGluayB9KTtcclxuICAvLyBwb3B1cENhcmRGb3JtLmNsb3NlKCk7XHJcbiAgLy8gY2FyZEVkaXRGb3JtLnJlc2V0KCk7XHJcbiAgLy8gYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlSW1hZ2VGb3JtU3VibWl0KGRhdGEpIHtcclxuICBwcm9maWxlUGljLnNyYyA9IHByb2ZpbGVQaWNNb2RhbElucHV0LnZhbHVlO1xyXG5cclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlUGljKGRhdGEpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUltYWdlRm9ybS5zaG93TG9hZGluZygpO1xyXG4gICAgICBwb3B1cFByb2ZpbGVJbWFnZUZvcm0uY2xvc2UoKTtcclxuICAgICAgcHJvZmlsZUltYWdlRWRpdEZvcm0ucmVzZXQoKTtcclxuICAgICAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cFByb2ZpbGVJbWFnZUZvcm0uaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcclxuICBwb3B1cFByZXZpZXdJbWFnZS5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkRWwpIHtcclxuICBwb3B1cFdpdGhEZWxldGVDYXJkLm9wZW4oKTtcclxuICBwb3B1cFdpdGhEZWxldGVDYXJkLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICBwb3B1cFdpdGhEZWxldGVDYXJkLnNob3dMb2FkaW5nKCk7XHJcbiAgICByZXR1cm4gYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRFbC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkRWwucmVtb3ZlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoRGVsZXRlQ2FyZC5oaWRlTG9hZGluZygpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmRJZCkge1xyXG4gIHJldHVybiBhcGkudG9nZ2xlQ2FyZExpa2UoY2FyZElkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGlzbGlrZUNsaWNrKGNhcmRJZCkge1xyXG4gIHJldHVybiBhcGkudG9nZ2xlQ2FyZERpc2xpa2UoY2FyZElkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiLmNhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICAgIGhhbmRsZURpc2xpa2VDbGlja1xyXG4gICkucmV0dXJuQ2FyZEVsZW1lbnQoKTtcclxuICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG4vL1xyXG4vL0V2ZW50IExpc3RlbmVyc1xyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZmlsbFByb2ZpbGVJbnB1dHMoKTtcclxuICBwb3B1cFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICBwb3B1cENhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5wcm9maWxlSW1hZ2VFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlSW1hZ2VGb3JtLm9wZW4oKTtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIGNvbnN0IHByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IHByZXZpZXdEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuXHJcbiAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHByZXZpZXdEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgbG9hZGluZ0J1dHRvblRleHQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBzaG93TG9hZGluZygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0O1xyXG4gIH1cclxuXHJcbiAgaGlkZUxvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25UZXh0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX21vZGFsQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZUNvbnRhaW5lciwgZGVzY3JpcHRpb25Db250YWluZXIsIHByb2ZpbGVQaWMgfSkge1xyXG4gICAgdGhpcy5fbmFtZUNvbnRhaW5lciA9IG5hbWVDb250YWluZXI7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkNvbnRhaW5lciA9IGRlc2NyaXB0aW9uQ29udGFpbmVyO1xyXG4gICAgdGhpcy5fcHJvZmlsZVBpYyA9IHByb2ZpbGVQaWM7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuICAgIGRhdGFbXCJwcm9maWxlTmFtZVwiXSA9IHRoaXMuX25hbWVDb250YWluZXIudGV4dENvbnRlbnQ7XHJcbiAgICBkYXRhW1wicHJvZmlsZURlc2NyaXB0aW9uXCJdID0gdGhpcy5fZGVzY3JpcHRpb25Db250YWluZXIudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIocmVzcG9uc2UpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVQaWMuc3JjID0gcmVzcG9uc2UuYXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubmFtZUlucHV0O1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25Db250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmRlc2NyaXB0aW9uSW5wdXQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfcHJvY2Vzc1Jlc3BvbnNlID0gKHJlcykgPT4ge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9O1xyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKGJvZHkpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQ2FyZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDYXJkRGlzbGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldFByb2ZpbGVJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZUluZm8oYm9keSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlUGljKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhciksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XHJcbiAgICB0aGlzLl9yZW5kZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlTGlrZURlbGV0ZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZUxpa2VEZWxldGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfbGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsInJlbW92ZSIsIl9jYXJkRWxlbWVudCIsInRoZW4iLCJjbGFzc0xpc3QiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhZGQiLCJzZXRJc0xpa2VkIiwiX3JlbmRlckxpa2VzIiwicmV0dXJuQ2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmREZXNjcmlwdGlvbiIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9vcHRpb25zIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrRm9ybVZhbGlkaXR5IiwiQXJyYXkiLCJmcm9tIiwiX2lucHV0RWxzIiwiZXZlcnkiLCJpbnB1dCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImZvckVhY2giLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX21vZGFsQ29udGFpbmVyIiwiX2JvdW5kSGFuZGxlRXNjYXBlQ2xvc2UiLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImxvYWRpbmdCdXR0b25UZXh0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9idXR0b25UZXh0IiwiX2xvYWRpbmdCdXR0b25UZXh0IiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJzaG93TG9hZGluZyIsImhpZGVMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwidmFsdWUiLCJmb3JtRGF0YSIsImZvcm1TZWxlY3RvciIsImVkaXRDYXJkTW9kYWwiLCJlZGl0UHJvZmlsZU1vZGFsIiwicHJvZmlsZUltYWdlTW9kYWwiLCJwcm9maWxlRWRpdEZvcm0iLCJjYXJkRWRpdEZvcm0iLCJwcm9maWxlSW1hZ2VFZGl0Rm9ybSIsInByZXZpZXdJbWFnZU1vZGFsIiwiZGVsZXRlQ2FyZE1vZGFsIiwicHJvZmlsZVBpYyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUltYWdlRWRpdEJ1dHRvbiIsImFkZE5ld0NhcmQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVQaWNNb2RhbElucHV0IiwiY2FyZExpc3RFbCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInByb2ZpbGVQaWNGb3JtVmFsaWRhdG9yIiwicG9wdXBQcmV2aWV3SW1hZ2UiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3RGVzY3JpcHRpb24iLCJwb3B1cFByb2ZpbGVGb3JtIiwiYXBpIiwidXBkYXRlUHJvZmlsZUluZm8iLCJ0aXRsZSIsImFib3V0IiwiZGVzY3JpcHRpb24iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImZpbmFsbHkiLCJwb3B1cENhcmRGb3JtIiwiYWRkQ2FyZCIsInJlbmRlckNhcmQiLCJyZXNldCIsInBvcHVwUHJvZmlsZUltYWdlRm9ybSIsInVwZGF0ZVByb2ZpbGVQaWMiLCJwb3B1cFdpdGhEZWxldGVDYXJkIiwiX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQiLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJfcmVmIiwibmFtZUNvbnRhaW5lciIsImRlc2NyaXB0aW9uQ29udGFpbmVyIiwiX25hbWVDb250YWluZXIiLCJfZGVzY3JpcHRpb25Db250YWluZXIiLCJfcHJvZmlsZVBpYyIsImdldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwicmVzcG9uc2UiLCJhdmF0YXIiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfcHJvY2Vzc1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiYm9keSIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwidG9nZ2xlQ2FyZExpa2UiLCJ0b2dnbGVDYXJkRGlzbGlrZSIsImdldFByb2ZpbGVJbmZvIiwiYXV0aG9yaXphdGlvbiIsInNlY3Rpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsIl9yZW5kZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRWwiLCJoYW5kbGVEaXNsaWtlQ2xpY2siLCJjYXJkRGF0YSIsImNhcmRFbGVtZW50IiwiY2FyZEl0ZW1zIiwiaW5wdXRzIiwiZmlsbFByb2ZpbGVJbnB1dHMiXSwic291cmNlUm9vdCI6IiJ9