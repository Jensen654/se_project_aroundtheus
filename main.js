!function(){"use strict";class e{constructor(e,t,s,n,i){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=n,this._handleLikeButton=i}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link}))),this._likeButton.addEventListener("click",(()=>{this._handleLikeButton(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)}))}remove(){this._cardElement.remove()}setIsLiked(e){this._isLiked=e,this._renderLikes()}isLiked(){return this._isLiked}_renderLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._isLiked||this._likeButton.classList.remove("card__like-button_active")}returnCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__trash-button"),this._cardDescription=this._cardElement.querySelector(".card__text"),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardDescription.textContent=this._name,this._renderLikes(),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._options=e,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity(){return Array.from(this._inputEls).every((e=>e.validity.valid))}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_setEventListeners(e){e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}enableValidation(){this._inputEls=this._formElement.querySelectorAll(this._inputSelector),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._inputEls.forEach((e=>{this._setEventListeners(e,this._submitButton)}))}}class s{constructor(e){this._popupElement=e,this._closeButton=this._popupElement.querySelector(".modal__close"),this._modalContainer=this._popupElement.querySelector(".js-modalContainer"),this._boundHandleEscapeClose=this._handleEscapeClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._boundHandleEscapeClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._boundHandleEscapeClose)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(()=>{this.close()})),this._modalContainer.addEventListener("click",(e=>{e.stopPropagation()}))}}class n extends s{constructor(e,t,s){super(e),this._submitButton=this._popupElement.querySelector(".modal__button"),this._handleFormSubmit=t,this._buttonText=this._submitButton.textContent,this._loadingButtonText=s,this._popupForm=this._popupElement.querySelector(".modal__container-form"),this._inputList=this._popupElement.querySelectorAll(".modal__container-input")}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._buttonText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)}))}}const i={formSelector:".modal__container-form",inputSelector:".modal__container-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_error",errorClass:"modal__error_visible"},o=document.querySelector("#card-modal"),r=document.querySelector("#edit-modal"),a=document.querySelector("#profile-image-modal"),l=r.querySelector(".modal__container-form"),c=o.querySelector(".modal__container-form"),d=a.querySelector(".modal__container-form"),h=document.querySelector("#image-modal"),u=document.querySelector("#trash-modal"),_=document.querySelector(".profile__image"),m=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__image_edit-button"),E=document.querySelector(".profile__add-button"),f=document.querySelector(".profile__title"),L=document.querySelector(".profile__description"),b=r.querySelector("#modal-name"),g=r.querySelector("#modal-description"),C=a.querySelector(".modal__container-input"),v=document.querySelector(".cards__list"),S="Saving...",k=new t(i,l),y=new t(i,c),B=new t(i,d);k.enableValidation(),y.enableValidation(),B.enableValidation();const I=new class extends s{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__image-description");t.src=e.link,t.alt=e.name,s.textContent=e.name,super.open()}}(h);I.setEventListeners();const q=new n(r,(function(e){q.showLoading(),D.updateProfileInfo({name:e.title,about:e.description}).then((()=>{U.setUserInfo({nameInput:e.title,descriptionInput:e.description}),q.close()})).catch((e=>console.log(e))).finally((()=>{q.hideLoading()}))}),S),x=new n(o,(function(e){const t=e.title,s=e.description;x.showLoading(),D.addCard({name:t,link:s}).then((e=>{R(e),x.close(),c.reset(),y.toggleButtonState()})).catch((e=>console.log(e))).finally((()=>{x.hideLoading()}))}),S),w=new n(a,(function(e){w.showLoading(),D.updateProfilePic(e).then((()=>{U.setAvatar(C.value),w.close(),d.reset(),y.toggleButtonState()})).catch((e=>console.log(e))).finally((()=>{w.hideLoading()}))}),S);q.setEventListeners(),x.setEventListeners(),w.setEventListeners();const P=new class extends s{constructor(e,t){super(e),this._submitButton=this._popupElement.querySelector(".modal__button"),this._buttonText=this._submitButton.textContent,this._loadingButtonText=t}showLoading(){this._submitButton.textContent=this._loadingButtonText}hideLoading(){this._submitButton.textContent=this._buttonText}setEventListeners(){super.setEventListeners(),this._modalContainer.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteFormSubmit()}))}setSubmitAction(e){this._handleDeleteFormSubmit=e}}(u,S);P.setEventListeners();const U=new class{constructor(e){let{nameContainer:t,descriptionContainer:s,profilePic:n}=e;this._nameContainer=t,this._descriptionContainer=s,this._profilePic=n}getUserInfo(){const e={};return e.profileName=this._nameContainer.textContent,e.profileDescription=this._descriptionContainer.textContent,e}setAvatar(e){this._profilePic.src=e}setUserInfo(e){this._nameContainer.textContent=e.nameInput,this._descriptionContainer.textContent=e.descriptionInput}}({nameContainer:f,descriptionContainer:L,profilePic:_}),D=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_processResponse=e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`);getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._processResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._processResponse)}toggleCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._processResponse)}toggleCardDislike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._processResponse)}getProfileInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._processResponse)}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}updateProfilePic(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1755563a-df02-4ecd-aa91-5c5958bedadf","Content-Type":"application/json"}}),T=new class{constructor(e,t){let{renderer:s}=e;this._render=s,this._container=t}renderItems(e){e.forEach((e=>this._render(e)))}addItem(e){this._container.prepend(e)}}({renderer:R},v);function $(e){I.open(e)}function A(e){P.open(),P.setSubmitAction((()=>{P.showLoading(),D.deleteCard(e._id).then((()=>{e.remove(),P.close()})).catch((e=>console.log(e))).finally((()=>{P.hideLoading()}))}))}function V(e){const t=e.isLiked();t?D.toggleCardDislike(e._id).then((t=>{e.setIsLiked(t.isLiked)})).catch((e=>console.log(e))):t||D.toggleCardLike(e._id).then((t=>{e.setIsLiked(t.isLiked)})).catch((e=>console.log(e)))}function R(t){const s=new e(t,".card-template",$,A,V).returnCardElement();T.addItem(s)}D.getInitialCards().then((e=>{T.renderItems(e)})).catch((e=>console.log(e))),D.getProfileInfo().then((e=>(U.setAvatar(e.avatar),U.setUserInfo({nameInput:e.name,descriptionInput:e.about})))).catch((e=>console.log(e))),D.getInitialCards().then((e=>console.log(e))),m.addEventListener("click",(function(e){!function(){const e=U.getUserInfo();b.value=e.profileName,g.value=e.profileDescription}(),q.open()})),E.addEventListener("click",(e=>{x.open()})),p.addEventListener("click",(()=>{w.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQixTQUFTLFNBQVVxRSxJQTdIdEQsV0FDRSxNQUFNcUgsRUFBU3JFLEVBQVMyQixjQUV4QjVDLEVBQWlCakIsTUFBUXVHLEVBQU94RixZQUNoQ0csRUFBd0JsQixNQUFRdUcsRUFBT3ZGLGtCQUN6QyxDQXlIRXdGLEdBQ0E3RSxFQUFpQjlDLE1BQ25CLElBRUFpQyxFQUFXakcsaUJBQWlCLFNBQVVxRSxJQUNwQ3lELEVBQWM5RCxNQUFNLElBR3RCZ0MsRUFBdUJoRyxpQkFBaUIsU0FBUyxLQUMvQ21JLEVBQXNCbkUsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUJ1dHRvblxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xyXG4gICAgLy8gdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgLy8gdGhpcy5faGFuZGxlTGlrZURlbGV0ZSA9IGhhbmRsZUxpa2VEZWxldGU7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbih0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIC8vIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gIC8vICAgaWYgKCF0aGlzLl9pc0xpa2VkKSB7XHJcbiAgLy8gICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZClcclxuICAvLyAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgLy8gICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgLy8gICAgICAgICB0aGlzLl9pc0xpa2VkID0gdHJ1ZTtcclxuICAvLyAgICAgICB9KVxyXG4gIC8vICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAvLyAgIH0gZWxzZSBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gIC8vICAgICB0aGlzLl9oYW5kbGVMaWtlRGVsZXRlKHRoaXMuX2lkKVxyXG4gIC8vICAgICAgIC50aGVuKCgpID0+IHtcclxuICAvLyAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAvLyAgICAgICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTtcclxuICAvLyAgICAgICB9KVxyXG4gIC8vICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIHNldElzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIGlmICghdGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm5DYXJkRWxlbWVudCgpIHtcclxuICAgIC8vZ2V0IGNhcmQgdmlld1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuXHJcbiAgICAvL2NhcmQgaW1hZ2UgYW5kIHNvdXJjZVxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG5cclxuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vcmV0dXJuIGNhcmRcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSgpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0RWxzKS5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgY29uc3QgZm91bmRJbnZhbGlkID0gIXRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCk7XHJcblxyXG4gICAgaWYgKGZvdW5kSW52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhpbnB1dEVsKSB7XHJcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGlucHV0RWwsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IHBvcHVwU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcblxyXG4gICAgdGhpcy5fbW9kYWxDb250YWluZXIgPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1tb2RhbENvbnRhaW5lclwiKTtcclxuXHJcbiAgICB0aGlzLl9ib3VuZEhhbmRsZUVzY2FwZUNsb3NlID0gdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kSGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kSGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY2FwZUNsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbW9kYWxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgbG9hZGluZ0J1dHRvblRleHQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuXHJcbiAgICB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dCA9IGxvYWRpbmdCdXR0b25UZXh0O1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY29udGFpbmVyLWZvcm1cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dFwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1EYXRhKTtcclxuICAgICAgLy8gdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyLWZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgaW5pdGlhbENhcmRzLCBvcHRpb25zIH07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIG9wdGlvbnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhEZWxldGUgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzXCI7XHJcblxyXG4vL01haW4gU2VsZWN0b3JzXHJcbmNvbnN0IGVkaXRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWltYWdlLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2NvbnRhaW5lci1mb3JtXCJcclxuKTtcclxuY29uc3QgY2FyZEVkaXRGb3JtID0gZWRpdENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXItZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZUltYWdlRWRpdEZvcm0gPSBwcm9maWxlSW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19jb250YWluZXItZm9ybVwiXHJcbik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcclxuY29uc3QgZGVsZXRlQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0cmFzaC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZVBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbi8vQnV0dG9uc1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2ltYWdlX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuY29uc3QgYWRkTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuLy9Gb3JtIERhdGFcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLW5hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID1cclxuICBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IHByb2ZpbGVQaWNNb2RhbElucHV0ID0gcHJvZmlsZUltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fY29udGFpbmVyLWlucHV0XCJcclxuKTtcclxuXHJcbi8vQ2FyZCB0ZW1wbGF0ZVxyXG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuLy9PdGhlclxyXG5jb25zdCBsb2FkaW5nQnV0dG9uVGV4dCA9IFwiU2F2aW5nLi4uXCI7XHJcblxyXG4vL1xyXG4vL0NsYXNzIGluc3RhbnRpYXRvcnNcclxuXHJcbi8vRm9ybVZhbGlkYXRvciBjbGFzc1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBjYXJkRWRpdEZvcm0pO1xyXG5jb25zdCBwcm9maWxlUGljRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIG9wdGlvbnMsXHJcbiAgcHJvZmlsZUltYWdlRWRpdEZvcm1cclxuKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnByb2ZpbGVQaWNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vUG9wdXBXaXRoSW1hZ2UgQ2xhc3NcclxuY29uc3QgcG9wdXBQcmV2aWV3SW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocHJldmlld0ltYWdlTW9kYWwpO1xyXG5wb3B1cFByZXZpZXdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9Qb3B1cFdpdGhGb3JtIENsYXNzXHJcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBlZGl0UHJvZmlsZU1vZGFsLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0XHJcbik7XHJcbmNvbnN0IHBvcHVwQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBlZGl0Q2FyZE1vZGFsLFxyXG4gIGhhbmRsZUNhcmRGb3JtU3VibWl0LFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0XHJcbik7XHJcbmNvbnN0IHBvcHVwUHJvZmlsZUltYWdlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHByb2ZpbGVJbWFnZU1vZGFsLFxyXG4gIGhhbmRsZVByb2ZpbGVJbWFnZUZvcm1TdWJtaXQsXHJcbiAgbG9hZGluZ0J1dHRvblRleHRcclxuKTtcclxucG9wdXBQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwUHJvZmlsZUltYWdlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9Qb3B1cFdpdGhEZWxldGUgQ2xhc3NcclxuY29uc3QgcG9wdXBXaXRoRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhEZWxldGUoXHJcbiAgZGVsZXRlQ2FyZE1vZGFsLFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0XHJcbik7XHJcbnBvcHVwV2l0aERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vVXNlckluZm8gQ2xhc3NcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVDb250YWluZXI6IHByb2ZpbGVOYW1lLFxyXG4gIGRlc2NyaXB0aW9uQ29udGFpbmVyOiBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVBpYyxcclxufSk7XHJcblxyXG4vL0FwaSBDbGFzc1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIxNzU1NTYzYS1kZjAyLTRlY2QtYWE5MS01YzU5NThiZWRhZGZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9TZWN0aW9uIENsYXNzXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sIGNhcmRMaXN0RWwpO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRJdGVtcykgPT4ge1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkSXRlbXMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuYXBpXHJcbiAgLmdldFByb2ZpbGVJbmZvKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAvLyBwcm9maWxlUGljLnNyYyA9IHJlcy5hdmF0YXI7XHJcbiAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcblxyXG4gICAgcmV0dXJuIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZUlucHV0OiByZXMubmFtZSxcclxuICAgICAgZGVzY3JpcHRpb25JbnB1dDogcmVzLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcblxyXG4vLyBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4vLyAgIGFwaS5hZGRDYXJkKGNhcmQpO1xyXG4vLyB9KTtcclxuXHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpO1xyXG5cclxuLy9cclxuLy9GdW5jdGlvbnNcclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVJbnB1dHMoKSB7XHJcbiAgY29uc3QgaW5wdXRzID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IGlucHV0cy5wcm9maWxlTmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGlucHV0cy5wcm9maWxlRGVzY3JpcHRpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcclxuICBwb3B1cFByb2ZpbGVGb3JtLnNob3dMb2FkaW5nKCk7XHJcblxyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKHtcclxuICAgICAgbmFtZTogZGF0YS50aXRsZSxcclxuICAgICAgYWJvdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZUlucHV0OiBkYXRhLnRpdGxlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uSW5wdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3B1cFByb2ZpbGVGb3JtLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUZvcm0uaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgY29uc3QgbmFtZSA9IGRhdGEudGl0bGU7XHJcbiAgY29uc3QgbGluayA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgcG9wdXBDYXJkRm9ybS5zaG93TG9hZGluZygpO1xyXG5cclxuICBhcGlcclxuICAgIC5hZGRDYXJkKHsgbmFtZTogbmFtZSwgbGluazogbGluayB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKHJlcyk7XHJcbiAgICAgIHBvcHVwQ2FyZEZvcm0uY2xvc2UoKTtcclxuICAgICAgY2FyZEVkaXRGb3JtLnJlc2V0KCk7XHJcbiAgICAgIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBDYXJkRm9ybS5oaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVJbWFnZUZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIHBvcHVwUHJvZmlsZUltYWdlRm9ybS5zaG93TG9hZGluZygpO1xyXG5cclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlUGljKGRhdGEpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihwcm9maWxlUGljTW9kYWxJbnB1dC52YWx1ZSk7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUltYWdlRm9ybS5jbG9zZSgpO1xyXG4gICAgICBwcm9maWxlSW1hZ2VFZGl0Rm9ybS5yZXNldCgpO1xyXG4gICAgICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUltYWdlRm9ybS5oaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xyXG4gIHBvcHVwUHJldmlld0ltYWdlLm9wZW4oZGF0YSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmRFbCkge1xyXG4gIHBvcHVwV2l0aERlbGV0ZUNhcmQub3BlbigpO1xyXG4gIHBvcHVwV2l0aERlbGV0ZUNhcmQuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgIHBvcHVwV2l0aERlbGV0ZUNhcmQuc2hvd0xvYWRpbmcoKTtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkRWwuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZEVsLnJlbW92ZSgpO1xyXG4gICAgICAgIHBvcHVwV2l0aERlbGV0ZUNhcmQuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhEZWxldGVDYXJkLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQnV0dG9uKGNhcmQpIHtcclxuICBjb25zdCBjYXJkTGlrZSA9IGNhcmQuaXNMaWtlZCgpO1xyXG4gIGlmIChjYXJkTGlrZSkge1xyXG4gICAgYXBpXHJcbiAgICAgIC50b2dnbGVDYXJkRGlzbGlrZShjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0SXNMaWtlZChyZXMuaXNMaWtlZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9IGVsc2UgaWYgKCFjYXJkTGlrZSkge1xyXG4gICAgYXBpXHJcbiAgICAgIC50b2dnbGVDYXJkTGlrZShjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0SXNMaWtlZChyZXMuaXNMaWtlZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkSWQpIHtcclxuLy8gICByZXR1cm4gYXBpLnRvZ2dsZUNhcmRMaWtlKGNhcmRJZCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZURpc2xpa2VDbGljayhjYXJkSWQpIHtcclxuLy8gICByZXR1cm4gYXBpLnRvZ2dsZUNhcmREaXNsaWtlKGNhcmRJZCk7XHJcbi8vIH1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICBcIi5jYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQnV0dG9uXHJcbiAgKS5yZXR1cm5DYXJkRWxlbWVudCgpO1xyXG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbi8vXHJcbi8vRXZlbnQgTGlzdGVuZXJzXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBmaWxsUHJvZmlsZUlucHV0cygpO1xyXG4gIHBvcHVwUHJvZmlsZUZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZE5ld0NhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gIHBvcHVwQ2FyZEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVJbWFnZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cFByb2ZpbGVJbWFnZUZvcm0ub3BlbigpO1xyXG59KTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgY29uc3QgcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgcHJldmlld0Rlc2NyaXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19pbWFnZS1kZXNjcmlwdGlvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICBwcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgcHJldmlld0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBsb2FkaW5nQnV0dG9uVGV4dCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBzaG93TG9hZGluZygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0O1xyXG4gIH1cclxuXHJcbiAgaGlkZUxvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25UZXh0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX21vZGFsQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lQ29udGFpbmVyLCBkZXNjcmlwdGlvbkNvbnRhaW5lciwgcHJvZmlsZVBpYyB9KSB7XHJcbiAgICB0aGlzLl9uYW1lQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lcjtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uQ29udGFpbmVyID0gZGVzY3JpcHRpb25Db250YWluZXI7XHJcbiAgICB0aGlzLl9wcm9maWxlUGljID0gcHJvZmlsZVBpYztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgZGF0YVtcInByb2ZpbGVOYW1lXCJdID0gdGhpcy5fbmFtZUNvbnRhaW5lci50ZXh0Q29udGVudDtcclxuICAgIGRhdGFbXCJwcm9maWxlRGVzY3JpcHRpb25cIl0gPSB0aGlzLl9kZXNjcmlwdGlvbkNvbnRhaW5lci50ZXh0Q29udGVudDtcclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihpbWFnZUxpbmspIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVQaWMuc3JjID0gaW1hZ2VMaW5rO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubmFtZUlucHV0O1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25Db250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmRlc2NyaXB0aW9uSW5wdXQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfcHJvY2Vzc1Jlc3BvbnNlID0gKHJlcykgPT4ge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9O1xyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKGJvZHkpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQ2FyZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDYXJkRGlzbGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldFByb2ZpbGVJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZUluZm8oYm9keSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlUGljKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhciksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XHJcbiAgICB0aGlzLl9yZW5kZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbiIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsInJlbW92ZSIsIl9jYXJkRWxlbWVudCIsInNldElzTGlrZWQiLCJfcmVuZGVyTGlrZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZXR1cm5DYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZERlc2NyaXB0aW9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX29wdGlvbnMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJfaW5wdXRFbHMiLCJldmVyeSIsImlucHV0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZm9yRWFjaCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfbW9kYWxDb250YWluZXIiLCJfYm91bmRIYW5kbGVFc2NhcGVDbG9zZSIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwibG9hZGluZ0J1dHRvblRleHQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2J1dHRvblRleHQiLCJfbG9hZGluZ0J1dHRvblRleHQiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsInNob3dMb2FkaW5nIiwiaGlkZUxvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsImZvcm1EYXRhIiwiZm9ybVNlbGVjdG9yIiwiZWRpdENhcmRNb2RhbCIsImVkaXRQcm9maWxlTW9kYWwiLCJwcm9maWxlSW1hZ2VNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybSIsImNhcmRFZGl0Rm9ybSIsInByb2ZpbGVJbWFnZUVkaXRGb3JtIiwicHJldmlld0ltYWdlTW9kYWwiLCJkZWxldGVDYXJkTW9kYWwiLCJwcm9maWxlUGljIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlSW1hZ2VFZGl0QnV0dG9uIiwiYWRkTmV3Q2FyZCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZVBpY01vZGFsSW5wdXQiLCJjYXJkTGlzdEVsIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZVBpY0Zvcm1WYWxpZGF0b3IiLCJwb3B1cFByZXZpZXdJbWFnZSIsInByZXZpZXdJbWFnZSIsInByZXZpZXdEZXNjcmlwdGlvbiIsInBvcHVwUHJvZmlsZUZvcm0iLCJhcGkiLCJ1cGRhdGVQcm9maWxlSW5mbyIsInRpdGxlIiwiYWJvdXQiLCJkZXNjcmlwdGlvbiIsInRoZW4iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJwb3B1cENhcmRGb3JtIiwiYWRkQ2FyZCIsInJlcyIsInJlbmRlckNhcmQiLCJyZXNldCIsInBvcHVwUHJvZmlsZUltYWdlRm9ybSIsInVwZGF0ZVByb2ZpbGVQaWMiLCJzZXRBdmF0YXIiLCJwb3B1cFdpdGhEZWxldGVDYXJkIiwiX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQiLCJzZXRTdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJfcmVmIiwibmFtZUNvbnRhaW5lciIsImRlc2NyaXB0aW9uQ29udGFpbmVyIiwiX25hbWVDb250YWluZXIiLCJfZGVzY3JpcHRpb25Db250YWluZXIiLCJfcHJvZmlsZVBpYyIsImdldFVzZXJJbmZvIiwiaW1hZ2VMaW5rIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX3Byb2Nlc3NSZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImJvZHkiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsInRvZ2dsZUNhcmRMaWtlIiwidG9nZ2xlQ2FyZERpc2xpa2UiLCJnZXRQcm9maWxlSW5mbyIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJzZWN0aW9uIiwiY29udGFpbmVyIiwicmVuZGVyZXIiLCJfcmVuZGVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsIiwiY2FyZCIsImNhcmRMaWtlIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImNhcmRJdGVtcyIsImlucHV0cyIsImZpbGxQcm9maWxlSW5wdXRzIl0sInNvdXJjZVJvb3QiOiIifQ==