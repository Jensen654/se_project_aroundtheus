!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link}))),this._likeButton.addEventListener("click",(()=>this._handleLikeButton())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteButton()))}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}returnCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__trash-button"),this._cardDescription=this._cardElement.querySelector(".card__text"),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardDescription.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._options=e,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkFormValidity(){return Array.from(this._inputEls).every((e=>e.validity.valid))}toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_setEventListeners(e){e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}enableValidation(){this._inputEls=this._formElement.querySelectorAll(this._inputSelector),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._inputEls.forEach((e=>{this._setEventListeners(e,this._submitButton)}))}}class s{constructor(e){this._popupElement=e,this._closeButton=this._popupElement.querySelector(".modal__close"),this._modalContainer=this._popupElement.querySelector(".js-modalContainer"),this._boundHandleEscapeClose=this._handleEscapeClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._boundHandleEscapeClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._boundHandleEscapeClose)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(()=>{this.close()})),this._modalContainer.addEventListener("click",(e=>{e.stopPropagation()}))}}class n extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__container-form"),this._inputList=this._popupElement.querySelectorAll(".modal__container-input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this._popupForm.reset()}))}}const i={formSelector:".modal__container-form",inputSelector:".modal__container-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_error",errorClass:"modal__error_visible"};class r{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getInitialCards(){fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>{if(e.ok)return e.json();Promise.reject()}))}addCard(e){fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log(e)}))}deleteCard(e){fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.json())).then((e=>{console.log(e)}))}toggleCardLike(e){fetch(`${this._baseUrl}/cards/${e}`,{headers:this._headers}).then((e=>e.json())).then((t=>{t.isLiked?t.isLiked&&fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}):fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers})}))}updateProfileInfo(e){fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log(e)}))}updateProfilePic(e){fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)})}}new r({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}});const o=document.querySelector("#card-modal"),a=document.querySelector("#edit-modal"),l=a.querySelector(".modal__container-form"),c=o.querySelector(".modal__container-form"),d=document.querySelector("#image-modal"),h=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__add-button"),_=(document.querySelector(".card__trash-button"),document.querySelector(".profile__title")),m=document.querySelector(".profile__description"),p=a.querySelector("#modal-name"),E=a.querySelector("#modal-description"),f=document.querySelector(".cards__list"),C=new t(i,l),b=new t(i,c);C.enableValidation(),b.enableValidation();const v=new class extends s{constructor(e){super(e)}open(e){const t=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__image-description");t.src=e.link,t.alt=e.name,s.textContent=e.name,super.open()}}(d);v.setEventListeners();const y=new n(a,(function(e){g.setUserInfo({nameInput:e.title,descriptionInput:e.description}),k.updateProfileInfo({name:e.title,about:e.description}),y.close()})),S=new n(o,(function(e){const t=e.title,s=e.description;B({name:t,link:s}),S.close(),c.reset(),b.toggleButtonState(),k.addCard({name:t,link:s})}));y.setEventListeners(),S.setEventListeners();const g=new class{constructor(e){let{nameContainer:t,descriptionContainer:s}=e;this._nameContainer=t,this._descriptionContainer=s}getUserInfo(){const e={};return e.profileName=this._nameContainer.textContent,e.profileDescription=this._descriptionContainer.textContent,e}setUserInfo(e){this._nameContainer.textContent=e.nameInput,this._descriptionContainer.textContent=e.descriptionInput}}({nameContainer:_,descriptionContainer:m}),k=new r({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1755563a-df02-4ecd-aa91-5c5958bedadf","Content-Type":"application/json"}}),L=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._render=n,this._container=t}renderItems(){this._items.forEach((e=>{this._render(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:B},f);function w(e){v.open(e)}function B(t){const s=new e(t,".card-template",w).returnCardElement();L.addItem(s)}L.renderItems(),k.getInitialCards().then((e=>{e.forEach((e=>{B(e)}))})),h.addEventListener("click",(function(e){!function(){const e=g.getUserInfo();p.value=e.profileName,E.value=e.profileDescription}(),y.open()})),u.addEventListener("click",(e=>{S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxHQUNFbEssS0FBSytKLE9BQU85RixTQUFTa0csSUFDRW5LLEtBQUtnSyxRQUFRRyxFQUFLLEdBRzNDLENBRUFDLE9BQUFBLENBQVFDLEdBQ05ySyxLQUFLaUssV0FBV0ssUUFBUUQsRUFDMUIsR0h3REEsQ0FBRVIsTUZ4RWlCLENBQ25CLENBQ0UzSixLQUFNLGtCQUNORSxLQUFNLHNHQUVSLENBQ0VGLEtBQU0sY0FDTkUsS0FBTSx5R0FFUixDQUNFRixLQUFNLGlCQUNORSxLQUFNLDRHQUVSLENBQ0VGLEtBQU0sVUFDTkUsS0FBTSxxR0FFUixDQUNFRixLQUFNLHdCQUNORSxLQUFNLHFHQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sbUdFaURlMEosU0FBVVYsR0FDakNoQixHQTJDRixTQUFTckksRUFBaUJGLEdBQ3hCMEksRUFBa0I3RCxLQUFLN0UsRUFDekIsQ0FFQSxTQUFTdUosRUFBV21CLEdBQ2xCLE1BQU1DLEVBQWMsSUFBSTdLLEVBQ3RCNEssRUFDQSxpQkFDQXhLLEdBQ0FtQixvQkFDRnlJLEVBQVFTLFFBQVFJLEVBQ2xCLENBcERBYixFQUFRTyxjQUVSakIsRUFBSWhELGtCQUFrQkUsTUFBTUMsSUFDMUJBLEVBQUluQyxTQUFTd0csSUFDWHJCLEVBQVdxQixFQUFLLEdBQ2hCLElBbURKM0MsRUFBa0JySCxpQkFBaUIsU0FBUyxTQUFVc0UsSUE5Q3RELFdBQ0UsTUFBTTJGLEVBQVMvQixFQUFVZSxjQUV6QnhCLEVBQWlCMUMsTUFBUWtGLEVBQU8xQyxZQUNoQ0csRUFBd0IzQyxNQUFRa0YsRUFBT3pDLGtCQUN6QyxDQTBDRTBDLEdBQ0FqQyxFQUFpQmhFLE1BQ25CLElBRUFxRCxFQUFXdEgsaUJBQWlCLFNBQVVzRSxJQUNwQ29FLEVBQWN6RSxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSlcclxuICAgICk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuQ2FyZEVsZW1lbnQoKSB7XHJcbiAgICAvL2dldCBjYXJkIHZpZXdcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkRGVzY3JpcHRpb24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWdcIik7XHJcblxyXG4gICAgLy9jYXJkIGltYWdlIGFuZCBzb3VyY2VcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmREZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgLy9yZXR1cm4gY2FyZFxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrRm9ybVZhbGlkaXR5KCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5faW5wdXRFbHMpLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBjb25zdCBmb3VuZEludmFsaWQgPSAhdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcclxuXHJcbiAgICBpZiAoZm91bmRJbnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGlucHV0RWwpIHtcclxuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoaW5wdXRFbCwgdGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBTZWxlY3RvcjtcclxuXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbiAgICB0aGlzLl9tb2RhbENvbnRhaW5lciA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLW1vZGFsQ29udGFpbmVyXCIpO1xyXG5cclxuICAgIHRoaXMuX2JvdW5kSGFuZGxlRXNjYXBlQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fYm91bmRIYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fYm91bmRIYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9tb2RhbENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY29udGFpbmVyLWZvcm1cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dFwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBkYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZm9ybURhdGEpO1xyXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXItZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXItaW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgeyBpbml0aWFsQ2FyZHMsIG9wdGlvbnMgfTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgLy8gICAgIGNvbnN0IGFwaUNhcmRzID0ge307XHJcbiAgICAvLyAgICAgcmVzdWx0LmZvckVhY2goKHJlcykgPT4ge1xyXG4gICAgLy8gICAgICAgYXBpQ2FyZHNbXCJuYW1lXCJdID0gcmVzLm5hbWU7XHJcbiAgICAvLyAgICAgICBhcGlDYXJkc1tcImxpbmtcIl0gPSByZXMubGluaztcclxuICAgIC8vICAgICB9KTtcclxuXHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coYXBpQ2FyZHMpO1xyXG5cclxuICAgIC8vICAgICByZXR1cm4gYXBpQ2FyZHM7XHJcbiAgICAvLyAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChib2R5KSB7XHJcbiAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAoIXJlcy5pc0xpa2VkKSB7XHJcbiAgICAgICAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzLmlzTGlrZWQpIHtcclxuICAgICAgICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVJbmZvKGJvZHkpIHtcclxuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlUGljKGF2YXRhcikge1xyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyKSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYzU2ZTMwZGMtMjg4My00MjcwLWE1OWUtYjJmN2JhZTk2OWM2XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgb3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbi8vTWFpbiBTZWxlY3RvcnNcclxuY29uc3QgZWRpdENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19jb250YWluZXItZm9ybVwiXHJcbik7XHJcbmNvbnN0IGNhcmRFZGl0Rm9ybSA9IGVkaXRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyLWZvcm1cIik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcclxuLy9CdXR0b25zXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgbW9kYWxDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xyXG4vL0Zvcm0gRGF0YVxyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPVxyXG4gIGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvblwiKTtcclxuXHJcbi8vQ2FyZCB0ZW1wbGF0ZVxyXG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbi8vXHJcbi8vQ2xhc3MgaW5zdGFudGlhdG9yc1xyXG5cclxuLy9Gb3JtVmFsaWRhdG9yIGNsYXNzXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgcHJvZmlsZUVkaXRGb3JtKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIGNhcmRFZGl0Rm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy9Qb3B1cFdpdGhJbWFnZSBDbGFzc1xyXG5jb25zdCBwb3B1cFByZXZpZXdJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwcmV2aWV3SW1hZ2VNb2RhbCk7XHJcbnBvcHVwUHJldmlld0ltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL1BvcHVwV2l0aEZvcm0gQ2xhc3NcclxuY29uc3QgcG9wdXBQcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGVkaXRQcm9maWxlTW9kYWwsXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuY29uc3QgcG9wdXBDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRDYXJkTW9kYWwsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcclxucG9wdXBQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL1VzZXJJbmZvIENsYXNzXHJcbmNvbnN0IHVzZXJDbGFzcyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZUNvbnRhaW5lcjogcHJvZmlsZU5hbWUsXHJcbiAgZGVzY3JpcHRpb25Db250YWluZXI6IHByb2ZpbGVEZXNjcmlwdGlvbixcclxufSk7XHJcblxyXG4vL0FwaSBDbGFzc1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIxNzU1NTYzYS1kZjAyLTRlY2QtYWE5MS01YzU5NThiZWRhZGZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9TZWN0aW9uIENsYXNzXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgY2FyZExpc3RFbFxyXG4pO1xyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiB7XHJcbiAgcmVzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgIHJlbmRlckNhcmQoY2FyZCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy9cclxuLy9GdW5jdGlvbnNcclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVJbnB1dHMoKSB7XHJcbiAgY29uc3QgaW5wdXRzID0gdXNlckNsYXNzLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBpbnB1dHMucHJvZmlsZU5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBpbnB1dHMucHJvZmlsZURlc2NyaXB0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgdXNlckNsYXNzLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWVJbnB1dDogZGF0YS50aXRsZSxcclxuICAgIGRlc2NyaXB0aW9uSW5wdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgfSk7XHJcblxyXG4gIGFwaS51cGRhdGVQcm9maWxlSW5mbyh7XHJcbiAgICBuYW1lOiBkYXRhLnRpdGxlLFxyXG4gICAgYWJvdXQ6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgfSk7XHJcblxyXG4gIHBvcHVwUHJvZmlsZUZvcm0uY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIGNvbnN0IG5hbWUgPSBkYXRhLnRpdGxlO1xyXG4gIGNvbnN0IGxpbmsgPSBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0pO1xyXG4gIHBvcHVwQ2FyZEZvcm0uY2xvc2UoKTtcclxuICBjYXJkRWRpdEZvcm0ucmVzZXQoKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgYXBpLmFkZENhcmQoeyBuYW1lOiBuYW1lLCBsaW5rOiBsaW5rIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcclxuICBwb3B1cFByZXZpZXdJbWFnZS5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgXCIuY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGlja1xyXG4gICkucmV0dXJuQ2FyZEVsZW1lbnQoKTtcclxuICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG4vL1xyXG4vL0V2ZW50IExpc3RlbmVyc1xyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZmlsbFByb2ZpbGVJbnB1dHMoKTtcclxuICBwb3B1cFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICBwb3B1cENhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBtb2RhbENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuLy8gICBwb3B1cFByb2ZpbGVGb3JtLm9wZW4oKTtcclxuLy8gfSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIGNvbnN0IHByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IHByZXZpZXdEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuXHJcbiAgICBwcmV2aWV3SW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHByZXZpZXdEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZUNvbnRhaW5lciwgZGVzY3JpcHRpb25Db250YWluZXIgfSkge1xyXG4gICAgdGhpcy5fbmFtZUNvbnRhaW5lciA9IG5hbWVDb250YWluZXI7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkNvbnRhaW5lciA9IGRlc2NyaXB0aW9uQ29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICBkYXRhW1wicHJvZmlsZU5hbWVcIl0gPSB0aGlzLl9uYW1lQ29udGFpbmVyLnRleHRDb250ZW50O1xyXG4gICAgZGF0YVtcInByb2ZpbGVEZXNjcmlwdGlvblwiXSA9IHRoaXMuX2Rlc2NyaXB0aW9uQ29udGFpbmVyLnRleHRDb250ZW50O1xyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGRhdGEubmFtZUlucHV0O1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25Db250YWluZXIudGV4dENvbnRlbnQgPSBkYXRhLmRlc2NyaXB0aW9uSW5wdXQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlbmRlcmVkSXRlbSA9IHRoaXMuX3JlbmRlcihpdGVtKTtcclxuICAgICAgLy8gdGhpcy5hZGRJdGVtKHJlbmRlcmVkSXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfbGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZXR1cm5DYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZERlc2NyaXB0aW9uIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX29wdGlvbnMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJfaW5wdXRFbHMiLCJldmVyeSIsImlucHV0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZm9yRWFjaCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfbW9kYWxDb250YWluZXIiLCJfYm91bmRIYW5kbGVFc2NhcGVDbG9zZSIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwidmFsdWUiLCJmb3JtRGF0YSIsInJlc2V0IiwiZm9ybVNlbGVjdG9yIiwiQXBpIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImFkZENhcmQiLCJib2R5IiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGVDYXJkIiwiY2FyZElkIiwidG9nZ2xlQ2FyZExpa2UiLCJpc0xpa2VkIiwidXBkYXRlUHJvZmlsZUluZm8iLCJ1cGRhdGVQcm9maWxlUGljIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImVkaXRDYXJkTW9kYWwiLCJlZGl0UHJvZmlsZU1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwiY2FyZEVkaXRGb3JtIiwicHJldmlld0ltYWdlTW9kYWwiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZE5ld0NhcmQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNhcmRMaXN0RWwiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJwb3B1cFByZXZpZXdJbWFnZSIsInByZXZpZXdJbWFnZSIsInByZXZpZXdEZXNjcmlwdGlvbiIsInBvcHVwUHJvZmlsZUZvcm0iLCJ1c2VyQ2xhc3MiLCJzZXRVc2VySW5mbyIsIm5hbWVJbnB1dCIsInRpdGxlIiwiZGVzY3JpcHRpb25JbnB1dCIsImRlc2NyaXB0aW9uIiwiYXBpIiwiYWJvdXQiLCJwb3B1cENhcmRGb3JtIiwicmVuZGVyQ2FyZCIsIl9yZWYiLCJuYW1lQ29udGFpbmVyIiwiZGVzY3JpcHRpb25Db250YWluZXIiLCJfbmFtZUNvbnRhaW5lciIsIl9kZXNjcmlwdGlvbkNvbnRhaW5lciIsImdldFVzZXJJbmZvIiwic2VjdGlvbiIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmREYXRhIiwiY2FyZEVsZW1lbnQiLCJjYXJkIiwiaW5wdXRzIiwiZmlsbFByb2ZpbGVJbnB1dHMiXSwic291cmNlUm9vdCI6IiJ9